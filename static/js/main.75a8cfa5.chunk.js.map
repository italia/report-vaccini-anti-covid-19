{"version":3,"sources":["components/HeaderBar.jsx","components/FooterBar.jsx","components/Total.jsx","utils.js","loadData.js","naturalSortAlgorithm.js","components/Table.jsx","components/BarChart.jsx","components/MapArea.jsx","containers/deliveries.jsx","components/HBarChart.jsx","containers/categories.jsx","components/BarChartsSupplier.jsx","components/Supplier.jsx","components/LocationsTable.jsx","containers/locations.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["HeaderBar","className","style","backgroundColor","href","target","rel","src","height","alt","FooterBar","id","Total","props","summary","timestamp","moment","format","tot","toLocaleString","sumDoseX","y","acc","x","maxX","aggrBy","p","key","push","filterBy","z","replaceArea","filterByArea","area","areaMapping","code","ABR","BAS","CAL","CAM","EMR","FVG","LAZ","LIG","LOM","MAR","MOL","PAB","PAT","PIE","PUG","SAR","SIC","TOS","UMB","VDA","VEN","baseURL","obj","retobj","inverse","sommVaxSummaryURL","sommVaxDetailURL","vaxSummaryURL","vaxLocationsURL","anagraficaSummaryURL","lastUpdateURL","supplierDoses","elaborate","data","dataSommVaxSummary","filter","d","reduce","dataSupplier","dataSupplierDoses","dataSomeVaxDetail","dataSommVaxDetail","map","deliverySummary","dataVaxSummary","categoriesAndAges","dataProfileSummary","dataVaxSomLatest","totalDoses","prima_dose","_","sum","e","seconda_dose","vax_somministrati","data_consegna","substr","_e","numero_dosi","categories","name","total","groups","groupBy","allDosesSupplier","Object","keys","k","groupByKey","group","totale","fornitore","allDoses","totalSuplier","allDosesMapByArea","doesesByArea","groupByArea","dose","totalDosesByArea","dosi_somministrate","categoriesByRegionRAW","categoriesByRegions","forEach","ds","cat_oss","cat_pns","cat_rsa","over60","deliveredByArea","locations","dataVaxLocations","maxNumberOfLocations","locationsByRegion","items","length","value","totalDeliverySummary","details","head","categoria_operatori_sanitari_sociosanitari","sumBy","categoria_over80","categoria_ospiti_rsa","categoria_personale_non_sanitario","categoria_forze_armate","categoria_personale_scolastico","byAge","rows","age","r","sesso_maschile","sesso_femminile","percentage","dosi_consegnate","fascia_anagrafica","percentuale_somministrazione","toFixed","totalDeliverySummaryByAge","i","toString","trim","rowsData","gender","gen_m","gen_f","dataLastUpdate","ultimo_aggiornamento","loadData","a","Promise","all","fetch","resSommVaxSummary","resSommVaxDetail","resVaxSummary","resProfileSummaryURL","resVaxLocations","resLastUpdate","resSupplierDoses","json","naturalSort","b","html","re","sre","dre","hre","ore","htmre","replace","xN","split","yN","xD","parseInt","match","Date","parse","yD","cLoc","numS","Math","max","oFxNcL","parseFloat","oFyNcL","isNaN","jQuery","dataTableExt","oSort","toLowerCase","$","DataTable","columns","title","Table","deliveryTableData","useEffect","find","append","dom","paging","searching","destroy","language","decimal","thousands","columnDefs","targets","width","type","render","row","Number","footerCallback","start","end","display","api","intVal","totalDelivery","column","search","totalVaccines","totalPercentage","footer","cellSpacing","paddingBottom","BarChart","handleDeliveryBarChartClick","selected","property","ytitle","myRef","useRef","divRef","d3","current","selectAll","remove","draw","responsivefy","svg","container","node","parentNode","aspect","resize","targetWidth","attr","round","call","window","on","maxScale","yprop","margin","xScale","padding","yScale","domain","range","xprop","text","chart","path","enter","bandwidth","exit","ref","MapArea","handleMapDeliveryClick","fillMapDeliveryArea","fillBy","tooltip","useState","geographies","setGeographies","maxValue","setMaxValue","maxBy","projection","center","rotate","parallels","scale","translate","res","topojson","objects","regions","features","fetchData","reg_name","properties","region","fill","field","stroke","strokeWidth","onClick","Deliveries","deliveryMapData","setDeliveryMapData","setDeliveryTableData","deliverySelectedRegion","setDeliverySelectedRegion","setTotalDelivery","totalAgeByGender","setTotalAgeByGender","deliveryBarChartData","setdeliveryBarChartData","selectedAge","setSelectedAge","isEmpty","resetFilter","data-toggle","position","top","right","scaleOp","valueToFill","deliveryTableFilteredData","xtitle","bar","HBarChart","handleRectClick","selectedCodeCategory","marginTop","Categories","categoryData","setCategoryData","categoryMapData","setCategoryMapData","setSelectedCodeCategory","totalByCategory","setTotalByCategory","categoryMapField","setCategoryMapField","categorySelectedRegion","setCategorySelectedRegion","zIndex","background","left","cat","overflow","BarChartSupplier","Supplier","selectedLocationCategoryMap","setSelectedLocationCategoryMap","selectedSupplier","setelectedSupplier","setTotalSuplier","currentRect","document","getElementById","clickEvt","MouseEvent","dispatchEvent","simulateClick","LocationsTable","setLocationCount","table","bLengthChange","info","scrollY","scrollCollapse","count","TextBoxTotal","locationCount","TextBoxMap","Locations","setSummary","selectedLocation","setSelectedLocation","paddingTop","App","then","loading","includes","hideLoader","minHeight","marginRight","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.75a8cfa5.chunk.js","sourcesContent":["import React from \"react\";\nimport \"../App.css\";\nimport \"bootstrap-italia/dist/css/bootstrap-italia.min.css\";\nimport \"typeface-titillium-web\";\nimport \"typeface-roboto-mono\";\nimport \"typeface-lora\";\n\nexport const HeaderBar = () => {\n  return (\n    <>\n      {/* <Header small={false} theme=\"\" type=\"slim\">\n      \n      </Header> */}\n      <div className=\"row m-0\" style={{ backgroundColor: '#0059b3' }}>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n          <a href=\"http://www.governo.it\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n          </a>\n          <p className=\"pt-sm-0\">\n            <a href=\"http://www.governo.it\" target=\"_blank\" className=\"text-decoration-none\" rel=\"noreferrer\">\n              Presidenza del Consiglio dei Ministri\n            </a>\n          </p>\n        </div>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pr-sm-0 pt-2 pb-2\">\n          <a className=\"text-decoration-none\" href=\"http://www.governo.it/it/dipartimenti/commissario-straordinario-lemergenza-covid-19/15974\" target=\"_blank\" rel=\"noreferrer\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n          </a>\n          <p className=\"pt-sm-0\">\n            <a className=\"text-decoration-none\" href=\"http://www.governo.it/it/dipartimenti/commissario-straordinario-lemergenza-covid-19/15974\" target=\"_blank\" rel=\"noreferrer\">\n              Commissario Straordinario Covid-19\n            </a>\n          </p>\n        </div>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2 pr-sm-3\">\n          <a href=\" http://www.salute.gov.it/portale/home.html\" target=\"_blank\" rel=\"noreferrer\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n          </a>\n          <p className=\"pt-sm-0\">\n            <a href=\"http://www.salute.gov.it/portale/home.html\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n              Ministero della Salute\n              </a>\n          </p>\n\n        </div>\n        {/** TITLE + LOGO*/}\n        <div className=\"col-12 d-flex flex-column justify-content-center mainBanner\">\n          <div className=\"d-flex justify-content-center\">\n            <img src=\"logo.png\" alt=\"Logo\" className=\"main-logo\" />\n            <span className=\"pl-3\">Report Vaccini Anti COVID-19</span>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n","import React from \"react\";\nimport \"../App.css\";\nimport \"bootstrap-italia/dist/css/bootstrap-italia.min.css\";\nimport \"typeface-titillium-web\";\nimport \"typeface-roboto-mono\";\nimport \"typeface-lora\";\n\nexport const FooterBar = () => {\n  return (\n    <>\n      <div className=\"footer-wrapper p-4 clearfix\">\n        <footer className=\"footer_container container\" id=\"footer\">\n          <div className=\"row title_row\">\n          <div className=\"col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n            <a href=\"http://www.governo.it\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n              <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n            </a>\n            <p className=\"pt-sm-0\">Presidenza del Consiglio dei Ministri</p>\n          </div>\n          <div className=\"col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n            <a href=\"http://www.governo.it\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n              <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n            </a>\n            <p className=\"pt-sm-0\">Commissario Straordinario Covid-19</p>\n          </div>\n          <div className=\"col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n            <a href=\"http://www.governo.it\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n              <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n            </a>\n            <p className=\"pt-sm-0\">Ministero della Salute</p>\n          </div>\n          </div>\n        </footer>\n      </div>\n    </>\n  );\n};\n","import { React } from \"react\";\nimport moment from \"moment\";\n\nexport const Total = (props) => {\n  return (\n    <div className=\"h-100 w-100 mt-2 mb-3 max-width-total\">\n      <div className=\"timestamp mx-auto\">\n        <h6 className=\"text-center pb-4\">\n          Report aggiornato al: {\" \"}\n          {props.summary.timestamp && moment(props.summary.timestamp).format(\"DD-MM-YYYY HH:mm\")}\n        </h6>\n      </div>\n      {/* <div className=\"container\"> */}\n      <div className=\"d-flex flex-column justify-content-center\">\n        <div className=\"d-flex justify-content-center align-items-baseline\">\n          <img src=\"meds.png\" alt=\"meds\" className=\"pl-2 pr-5\" />\n          {\" \"}\n          <h1 className=\"pl-2 mt-4 font-weight-light\">{props.summary.tot?.toLocaleString('it')}</h1>\n        </div>\n        <span className=\"border-top mb-2\"></span>\n        <div className=\"d-flex justify-content-center\">\n          <img src=\"logo.png\" alt=\"fiore\" height=\"30\" />\n          <img src=\"logo.png\" alt=\"fiore\" height=\"30\" />\n          <img src=\"logo.png\" alt=\"fiore\" height=\"30\" className=\"pr-5\" />\n          {\" \"}\n          <h4 className=\"pl-2\">Totale somministrazioni</h4>\n        </div>\n      </div>\n    </div>\n    // </div>\n  );\n};\n","import * as _ from 'lodash';\nexport const hideLoader = () => {\n  let loading = document.getElementById('loader-custom');\n  if (loading) loading.className = !loading.className.includes('d-none') ? loading.className + ' d-none' : loading.className;\n}\nexport const showLoader = () => {\n  let loading = document.getElementById('loader-custom');\n  if (loading) loading.className = loading.className.includes('d-none') ? loading.className.replace('d-none', '') : loading.className;\n}\nexport const sumDose = (acc, x) => acc + +x?.TML_DOSE_1 + +x?.TML_DOSE_2;\nexport const sumDoseXY = (y, z) => (acc, x) => acc + +x?.[y] + +x?.[z];\nexport const sumYear = (accumulator, currentValue) => accumulator + currentValue;\nexport const sumDoseX = (y) => (acc, x) => acc + +x?.[y];\nexport const maxX = (y) => (acc, x) => (x?.[y] > acc ? x?.[y] : acc);\nexport const age = [\"16-19\", \"20-29\", \"30-39\", \"40-49\", \"50-59\", \"60-69\", \"70-79\", \"80-89\", \"90+\"];\nexport const groupByAge = (array) => {\n  let _age;\n  if (Array.isArray(array) && array.length > 0) {\n    _age = age.map(el => {\n      let resMale = _.sum(array.filter(_el => _el.fascia_anagrafica.trim() === el).map(__el => __el.sesso_maschile));\n      let resFemale = _.sum(array.filter(_el => _el.fascia_anagrafica.trim() === el).map(__el => __el.sesso_femminile));\n      return { fascia_anagrafica: el, sesso_femminile: resFemale, sesso_maschile: resMale, totale: resMale + resFemale };\n    });\n  }\n  return _age;\n}\nexport const mapArrayByProp = (array, prop) => array.map((e) => e[prop]);\nexport const reduceSum = (array) => array.reduce(sumYear);\n\nexport const allTotalGender = (array) => {\n  let sessoMaschile = reduceSum(mapArrayByProp(array, 'sesso_maschile'));\n  let sessoFemminile = reduceSum(mapArrayByProp(array, 'sesso_femminile'));\n  return { gen_m: sessoMaschile, gen_f: sessoFemminile }\n}\nexport const aggrBy = (p) => (acc, x) => {\n  let key = x[p];\n  if (!acc[key]) {\n    acc[key] = [];\n  }\n  acc[key].push(x);\n  return acc;\n};\nexport const filterBy = (y) => (z) => (x) => {\n  return x[y] === z;\n};\nexport const filterByArea = filterBy(\"area\");\nexport const filterByAreaITA = filterByArea(\"ITA\");\nexport const filterByAge = filterBy(\"TML_FASCIA_ETA\");\nexport const mapBy = (y) =>\n  Object.keys(y).map((x) => {\n    return { [x]: { sum: y[x].reduce(sumDose, 0) } };\n  });\nexport const mapByX = (y, z) =>\n  Object.keys(y).map((x) => {\n    return { [x]: y[x].reduce(sumDoseX(z), 0) };\n  });\nconst inverse = (obj) => {\n  let retobj = {};\n  for (const key in obj) {\n    retobj[obj[key]] = key;\n  }\n  return retobj;\n};\nexport const simulateClick = (id) => {\n  if (document.getElementById(id) && id) {\n    let clickEvt = new MouseEvent('click', {\n      'bubbles': true,\n      'cancelable': true\n    });\n    document.getElementById(id).dispatchEvent(clickEvt);\n  }\n}\nexport const replaceArea = (x) => ({ ...x, area: areaMapping[x.area], code: x.area });\nexport const areaMapping = {\n  ABR: \"Abruzzo\",\n  BAS: \"Basilicata\",\n  CAL: \"Calabria\",\n  CAM: \"Campania\",\n  EMR: \"Emilia-Romagna\",\n  FVG: \"Friuli-Venezia Giulia\",\n  LAZ: \"Lazio\",\n  LIG: \"Liguria\",\n  LOM: \"Lombardia\",\n  MAR: \"Marche\",\n  MOL: \"Molise\",\n  PAB: \"P.A. Bolzano\",\n  PAT: \"P.A. Trento\",\n  PIE: \"Piemonte\",\n  PUG: \"Puglia\",\n  SAR: \"Sardegna\",\n  SIC: \"Sicilia\",\n  TOS: \"Toscana\",\n  UMB: \"Umbria\",\n  VDA: \"Valle d'Aosta\",\n  VEN: \"Veneto\",\n};\nexport const areaMappingReverse = inverse(areaMapping);\n\n//\n//   const tot2 = data.reduce(sumDoseXY(\"TML_DOSE_1\", \"TML_DOSE_2\"), 0);\n//   const areasRAW = data.reduce(aggrBy(\"TML_AREA\"), {});\n//   const tot_m = data.reduce(sumDoseX(\"TML_SESSO_M\"), 0);\n//   const tot_f = data.reduce(sumDoseX(\"TML_SESSO_F\"), 0);\n//   const areas = mapBy(areasRAW);\n//   const fascia1619 = data.filter(filterByAge(\"16-19\"));\n//   const fascia2029 = data.filter(filterByAge(\"20-29\"));\n//   const totfascia1619 = fascia1619.reduce(sumDose, 0);\n//   const totfascia2029 = fascia2029.reduce(sumDose, 0);\n","import { sumDoseX, replaceArea, aggrBy, areaMapping } from \"./utils\";\nimport _ from 'lodash';\nconst baseURL =\n  \"https://raw.githubusercontent.com/italia/covid19-opendata-vaccini/master/dati\";\n\nconst sommVaxSummaryURL = `${baseURL}/somministrazioni-vaccini-summary-latest.json`;\nconst sommVaxDetailURL = `${baseURL}/somministrazioni-vaccini-latest.json`;\nconst vaxSummaryURL = `${baseURL}/vaccini-summary-latest.json`;\nconst vaxLocationsURL = `${baseURL}/punti-somministrazione-tipologia.json`;\nconst anagraficaSummaryURL = `${baseURL}/anagrafica-vaccini-summary-latest.json`;\nconst lastUpdateURL = `${baseURL}/last-update-dataset.json`;\nconst supplierDoses = `${baseURL}/consegne-vaccini-latest.json`;\nconst elaborate = (data) => {\n  const tot = data.dataSommVaxSummary.data\n    .filter(d => d.area !== 'ITA')\n    .reduce(sumDoseX(\"totale\"), 0);\n  // datatable and map\n  const dataSupplier = data.dataSupplierDoses.data;\n  const dataSomeVaxDetail = data.dataSommVaxDetail.data.map(replaceArea);\n\n  const deliverySummary = data.dataVaxSummary.data.map(replaceArea);\n\n  // categories and ages summary\n  const categoriesAndAges = data.dataProfileSummary.data;\n  const dataVaxSomLatest = data?.dataSommVaxDetail?.data;\n\n  let totalDoses = {\n    prima_dose: _.sum(dataVaxSomLatest?.map(e => e?.prima_dose)),\n    seconda_dose: _.sum(dataVaxSomLatest?.map(e => e?.seconda_dose)),\n    vax_somministrati: _.sum(dataSupplier?.filter((e) => e?.data_consegna?.substr(0, 10) !== '2020-12-27')?.map(_e => _e?.numero_dosi))?.toLocaleString('it')\n  }\n  const categories = [\n    {\n      name: \"Operatori Sanitari e Sociosanitari\",\n      code: \"categoria_operatori_sanitari_sociosanitari\",\n      total: dataVaxSomLatest.reduce(\n        sumDoseX(\"categoria_operatori_sanitari_sociosanitari\"),\n        0\n      ),\n    },\n    {\n      name: \"Personale non sanitario\",\n      code: \"categoria_personale_non_sanitario\",\n      total: dataVaxSomLatest.reduce(\n        sumDoseX(\"categoria_personale_non_sanitario\"),\n        0\n      ),\n    },\n    {\n      name: \"Ospiti Strutture Residenziali\",\n      code: \"categoria_ospiti_rsa\",\n      total: dataVaxSomLatest.reduce(sumDoseX(\"categoria_ospiti_rsa\"), 0),\n    },\n    {\n      name: 'Over 80', \n      code: 'categoria_over80',\n      total: dataVaxSomLatest.reduce(sumDoseX(\"categoria_over80\"), 0),\n    },\n    {\n      name: 'Forze Armate', \n      code: 'categoria_forze_armate',\n      total: dataVaxSomLatest.reduce(sumDoseX(\"categoria_forze_armate\"), 0),\n    },\n    {\n      name: 'Personale Scolastico', \n      code: 'categoria_personale_scolastico',\n      total: dataVaxSomLatest.reduce(sumDoseX(\"categoria_personale_scolastico\"), 0),\n    }\n  ];\n\n  const groups = _.groupBy(dataSupplier, 'fornitore');\n  let allDosesSupplier = Object.keys(groups).map(k => {\n    let groupByKey = groups[k].map(group => group.numero_dosi);\n    let sumTotalDoses = _.sum(groupByKey);\n    return { totale: sumTotalDoses, fornitore: k, allDoses: groups[k] }\n  })\n\n  let totalSuplier = _.sum(allDosesSupplier.map(e => e?.totale));\n\n  let allDosesMapByArea = _.groupBy(dataSupplier, 'area');\n  let doesesByArea = Object.keys(allDosesMapByArea).map(area => {\n\n    let groupByArea = allDosesMapByArea[area].map((dose) => dose.numero_dosi);\n    let totalDosesByArea = _.sum(groupByArea);\n    return { area: areaMapping[area], dosi_somministrate: totalDosesByArea }\n  })\n\n  const categoriesByRegionRAW = data.dataSommVaxSummary.data.reduce(\n    aggrBy(\"area\"),\n    {}\n  );\n\n  let categoriesByRegions = {};\n  Object.keys(categoriesByRegionRAW).map((x) => {\n\n    categoriesByRegions[x] = [\n      {\n        name: \"Operatori Sanitari e Sociosanitari\",\n        code: \"categoria_operatori_sanitari_sociosanitari\",\n        total: categoriesByRegionRAW[x].reduce(\n          sumDoseX(\"categoria_operatori_sanitari_sociosanitari\"),\n          0\n        ),\n      },\n      {\n        name: \"Personale non sanitario\",\n        code: \"categoria_personale_non_sanitario\",\n        total: categoriesByRegionRAW[x].reduce(\n          sumDoseX(\"categoria_personale_non_sanitario\"),\n          0\n        ),\n      },\n      {\n        name: \"Ospiti Strutture Residenziali\",\n        code: \"categoria_ospiti_rsa\",\n        total: categoriesByRegionRAW[x]?.reduce(\n          sumDoseX(\"categoria_ospiti_rsa\"),\n          0\n        ),\n\n      },\n      {\n        name: 'Over 80',\n        code: 'categoria_over80',\n        total: categoriesByRegionRAW[x]?.reduce(sumDoseX(\"categoria_over80\"), 0),\n      },\n      {\n        name: 'Forze Armate',\n        code: 'categoria_forze_armate',\n        total: categoriesByRegionRAW[x]?.reduce(sumDoseX(\"categoria_forze_armate\"), 0),\n      },\n      {\n        name: 'Personale Scolastico',\n        code: 'categoria_personale_scolastico',\n        total: categoriesByRegionRAW[x]?.reduce(sumDoseX(\"categoria_personale_scolastico\"), 0),\n      }\n    ];\n    return categoriesByRegions;\n  });\n\n  deliverySummary.forEach(ds => {\n    if (categoriesByRegions[ds.code]) {\n      ds['byCategory'] = categoriesByRegions[ds.code].reduce(\n        aggrBy(\"code\"),\n        {}\n      )\n    } else {\n      ds['byCategory'] = {\n        cat_oss: [{ name: \"Operatori Sanitari e Sociosanitari\", code: \"cat_oss\", total: 0 }],\n        cat_pns: [{ name: \"Personale non sanitario\", code: \"cat_pns\", total: 0 }],\n        cat_rsa: [{ name: \"Ospiti Strutture Residenziali\", code: \"cat_rsa\", total: 0 }],\n        over60: [{ name: \"Over 80\", code: \"over60\", total: 0 }]\n      }\n    }\n  })\n\n  const deliveredByArea = _.groupBy(deliverySummary, 'code');\n\n  const locations = data.dataVaxLocations.data.map(replaceArea);\n\n  let maxNumberOfLocations = 0\n\n  const locationsByRegion = _(data.dataVaxLocations.data.map(replaceArea))\n    .groupBy('area')\n    .map((items, area)=>{\n      maxNumberOfLocations = maxNumberOfLocations > items.length ? maxNumberOfLocations : items.length;\n      return {area: area, locations: items.length}\n    }).value();\n\n  const totalDeliverySummary = _(data.dataSommVaxDetail.data.map(replaceArea))\n    .groupBy('code')\n    .map((items, code)=>{\n      const details = _.head(deliveredByArea[code])\n      return ({\n        code: code,\n        area: _.head(items)?.area, \n        categoria_operatori_sanitari_sociosanitari: _.sumBy(items, 'categoria_operatori_sanitari_sociosanitari'),\n        categoria_over80: _.sumBy(items, 'categoria_over80'),\n        categoria_ospiti_rsa: _.sumBy(items, 'categoria_ospiti_rsa'),\n        categoria_personale_non_sanitario: _.sumBy(items, 'categoria_personale_non_sanitario'),\n        categoria_forze_armate: _.sumBy(items, 'categoria_forze_armate'),\n        categoria_personale_scolastico: _.sumBy(items, 'categoria_personale_scolastico'),\n        byAge: _(items)\n                  .groupBy('fascia_anagrafica')\n                  .map((rows, age)=>{\n                    const dosi_somministrate = _.sumBy(rows, (r)=>r.sesso_maschile + r.sesso_femminile);\n                    const percentage = dosi_somministrate/(details.dosi_consegnate || 1);\n                    return {\n                      age: age,\n                      fascia_anagrafica: age,\n                      dosi_somministrate,\n                      dosi_consegnate: details.dosi_consegnate || 0,\n                      percentuale_somministrazione: +(percentage*100).toFixed(1),\n                      area: _.head(items)?.area,\n                      totale: dosi_somministrate\n                  }}).value(),\n        sesso_femminile: _.sumBy(items, 'sesso_femminile'),\n        sesso_maschile: _.sumBy(items, 'sesso_maschile'),\n        dosi_consegnate: details.dosi_consegnate || 0,\n        dosi_somministrate: details.dosi_somministrate || 0,\n        percentuale_somministrazione: details.percentuale_somministrazione || 0\n      })}).value();\n\n\n    const totalDeliverySummaryByAge = _(data.dataSommVaxDetail.data.map(replaceArea))\n      .groupBy(i => i['fascia_anagrafica'].toString().trim())\n      .map((rows, age)=>{\n        const details = _(rows).groupBy('code').map((rowsData, code)=>{\n          const dosi_somministrate = _.sumBy(rowsData, (r)=>r.sesso_maschile + r.sesso_femminile);\n          const percentage = dosi_somministrate/(_.head(deliveredByArea[code]).dosi_consegnate || 1);\n          return {\n            age: age,\n            dosi_somministrate,\n            sesso_maschile: _.sumBy(rowsData, 'sesso_maschile'),\n            sesso_femminile: _.sumBy(rowsData, 'sesso_femminile'),\n            code: code,\n            dosi_consegnate: _.head(deliveredByArea[code]).dosi_consegnate || 0,\n            percentuale_somministrazione: +(percentage*100).toFixed(1),\n            area: _.head(rowsData).area,\n            //details: rows\n          }\n        })\n        .value()\n        return {\n          age: age,\n          details: details\n      }})\n      .groupBy('age')\n      .value()\n\n  const gender = {\n    gen_m: categoriesAndAges.reduce(sumDoseX(\"sesso_maschile\"), 0),\n    gen_f: categoriesAndAges.reduce(sumDoseX(\"sesso_femminile\"), 0),\n  };\n\n  const timestamp = data.dataLastUpdate.ultimo_aggiornamento;\n  const aggr = {\n    timestamp,\n    tot,\n    deliverySummary,\n    categoriesAndAges,\n    categories,\n    categoriesByRegions,\n    locations,\n    gender,\n    dataSomeVaxDetail,\n    locationsByRegion,\n    maxNumberOfLocations,\n    allDosesSupplier,\n    doesesByArea,\n    totalSuplier,\n    totalDoses,\n    totalDeliverySummaryByAge,\n    totalDeliverySummary\n  };\n  return aggr;\n};\n\nexport const loadData = async () => {\n  const [\n    resSommVaxSummary, \n    resSommVaxDetail, \n    resVaxSummary,\n    resProfileSummaryURL,\n    resVaxLocations,\n    resLastUpdate,\n\t  resSupplierDoses\n  ] = await Promise.all([\n    fetch(sommVaxSummaryURL), \n    fetch(sommVaxDetailURL), \n    fetch(vaxSummaryURL),\n    fetch(anagraficaSummaryURL),\n    fetch(vaxLocationsURL),\n    fetch(lastUpdateURL),\n\t  fetch(supplierDoses)\n  ])\n\n  const [\n    dataSommVaxSummary,\n    dataSommVaxDetail,\n    dataVaxSummary,\n    dataProfileSummary,\n    dataVaxLocations,\n    dataLastUpdate,\n\t  dataSupplierDoses\n  ] = await Promise.all([\n    resSommVaxSummary.json(),\n    resSommVaxDetail.json(),\n    resVaxSummary.json(),\n    resProfileSummaryURL.json(),\n    resVaxLocations.json(),\n    resLastUpdate.json(),\n\t  resSupplierDoses.json()\n  ])\n  \n  return {\n    ...elaborate({\n      dataSommVaxSummary,\n      dataSommVaxDetail,\n      dataVaxSummary,\n      dataProfileSummary,\n      dataLastUpdate,\n      dataVaxLocations,\n\t  dataSupplierDoses\n    }),\n  };\n};\n","/* eslint-disable */\nimport * as jQuery from \"jquery\";\n\n(function() {\n \n    /*\n     * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license\n     * Author: Jim Palmer (based on chunking idea from Dave Koelle)\n     * Contributors: Mike Grier (mgrier.com), Clint Priest, Kyle Adams, guillermo\n     * See: http://js-naturalsort.googlecode.com/svn/trunk/naturalSort.js\n     */\n    function naturalSort (a, b, html) {\n        var re = /(^-?[0-9]+(\\.?[0-9]*)[df]?e?[0-9]?%?$|^0x[0-9a-f]+$|[0-9]+)/gi,\n            sre = /(^[ ]*|[ ]*$)/g,\n            dre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,\n            hre = /^0x[0-9a-f]+$/i,\n            ore = /^0/,\n            htmre = /(<([^>]+)>)/ig,\n            // convert all to strings and trim()\n            x = a.toString().replace(sre, '') || '',\n            y = b.toString().replace(sre, '') || '';\n            // remove html from strings if desired\n            if (!html) {\n                x = x.replace(htmre, '');\n                y = y.replace(htmre, '');\n            }\n            // chunk/tokenize\n        var xN = x.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\n            yN = y.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\n            // numeric, hex or date detection\n            xD = parseInt(x.match(hre), 10) || (xN.length !== 1 && x.match(dre) && Date.parse(x)),\n            yD = parseInt(y.match(hre), 10) || xD && y.match(dre) && Date.parse(y) || null;\n     \n        // first try and sort Hex codes or Dates\n        if (yD) {\n            if ( xD < yD ) {\n                return -1;\n            }\n            else if ( xD > yD ) {\n                return 1;\n            }\n        }\n     \n        // natural sorting through split numeric strings and default strings\n        for(var cLoc=0, numS=Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {\n            // find floats not starting with '0', string or 0 if not defined (Clint Priest)\n            var oFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc], 10) || xN[cLoc] || 0;\n            var oFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc], 10) || yN[cLoc] || 0;\n            // handle numeric vs string comparison - number < string - (Kyle Adams)\n            if (isNaN(oFxNcL) !== isNaN(oFyNcL)) {\n                return (isNaN(oFxNcL)) ? 1 : -1;\n            }\n            // rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'\n            else if (typeof oFxNcL !== typeof oFyNcL) {\n                oFxNcL += '';\n                oFyNcL += '';\n            }\n            if (oFxNcL < oFyNcL) {\n                return -1;\n            }\n            if (oFxNcL > oFyNcL) {\n                return 1;\n            }\n        }\n        return 0;\n    }\n     \n    jQuery.extend( jQuery.fn.dataTableExt.oSort, {\n        \"natural-asc\": function ( a, b ) {\n            return naturalSort(a,b,true);\n        },\n     \n        \"natural-desc\": function ( a, b ) {\n            return naturalSort(a,b,true) * -1;\n        },\n     \n        \"natural-nohtml-asc\": function( a, b ) {\n            return naturalSort(a,b,false);\n        },\n     \n        \"natural-nohtml-desc\": function( a, b ) {\n            return naturalSort(a,b,false) * -1;\n        },\n     \n        \"natural-ci-asc\": function( a, b ) {\n            a = a.toString().toLowerCase();\n            b = b.toString().toLowerCase();\n     \n            return naturalSort(a,b,true);\n        },\n     \n        \"natural-ci-desc\": function( a, b ) {\n            a = a.toString().toLowerCase();\n            b = b.toString().toLowerCase();\n     \n            return naturalSort(a,b,true) * -1;\n        }\n    } );\n     \n    }());","import { React, useEffect } from \"react\";\nimport * as $ from \"jquery\";\nimport DataTable from \"datatables.net\";\nimport \"./Table.css\";\nimport \"../naturalSortAlgorithm\";\n\n\n$.DataTable = DataTable;\nconst columns = [\n  { title: \"Regioni\", data: \"area\" },\n  { title: \"Dosi somministrate\", data: \"dosi_somministrate\" },\n  { title: \"Dosi consegnate\", data: \"dosi_consegnate\" },\n  { title: \"%\", data: \"percentuale_somministrazione\" },\n];\n\nexport const Table = ({ deliveryTableData }) => {\n\n  // Add footer elements\n  useEffect(() => {\n    $(\"#datatable\").find(\"tfoot\")\n    $(\"#datatable\")\n      .find(\"table\")\n      .append('<tfoot><th></th><th></th><th></th><th></th></tfoot>')\n  }, [])\n\n  useEffect(() => {\n\n    $(\"#datatable\")\n      .find(\"table\")\n      .DataTable({\n        dom:\n          \"<'row'<'col-12'l>>\" +\n          \"<'row'<'col-12'tr>>\",\n        paging: false,\n        searching: true,\n        destroy: true,\n        data: deliveryTableData,\n        columns,\n        language: {\n          decimal: \",\",\n          thousands: \".\"\n        },\n        columnDefs: [\n          {\n            targets: 0,\n            width: '160px'\n          },\n          { type: 'natural', targets: 3 },\n          {\n            \"targets\": [1, 2, 3],\n            render: (data, type, row) => {\n              return Number(data).toLocaleString('it')\n            }\n          }\n        ],\n        footerCallback: (row, data, start, end, display) => {\n          var api = $(\"#datatable\")\n            .find(\"table\")\n            .DataTable();\n\n          // Remove the formatting to get integer data for summation\n          var intVal = function (i) {\n            return typeof i === 'string' ?\n              i.replace(/[$,]/g, '') * 1 :\n              typeof i === 'number' ?\n                i : 0;\n          };\n\n          let totalDelivery = api\n            .column(2, { search: 'applied' })\n            .data()\n            .reduce(function (a, b) {\n              return intVal(a) + intVal(b);\n            }, 0);\n\n          let totalVaccines = api\n            .column(1, { search: 'applied' })\n            .data()\n            .reduce(function (a, b) {\n              return intVal(a) + intVal(b);\n            }, 0);\n\n          // Total over all pages\n          var totalPercentage = totalDelivery ? (totalVaccines/totalDelivery)*100 : 0\n\n          // Update footer\n          $(api.column(3).footer()).html(\n            (totalPercentage).toFixed(1) + '%'\n          );\n\n          $(api.column(2).footer()).html(\n            totalDelivery.toLocaleString('it')\n          );\n\n          $(api.column(1).footer()).html(\n            totalVaccines.toLocaleString('it')\n          );\n\n          $(api.column(0).footer()).html(\n            'Totale'\n          );\n        }\n      });\n\n  },[deliveryTableData]);\n\n  return (\n    <div id=\"datatable\">\n      <table\n        className=\"table h-100 table-borderless compact table-hover\"\n        cellSpacing=\"0\"\n        width=\"100%\"\n        style={{ paddingBottom: 6 }}\n      />\n    </div>\n  );\n};\n","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../App.css\";\nimport { maxX } from \"../utils\";\n\nexport const BarChart = ({\n  handleDeliveryBarChartClick, \n  height,\n  width,\n  data,\n  selected,\n  property,\n  title,\n  ytitle\n  }) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n      doExit();\n      draw();\n  // eslint-disable-next-line \n  },[data, selected]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n\n    const maxScale = data?.reduce(maxX(property.yprop), 0) || 0;\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 50, x: 50 };\n\n    // axis\n    const xScale = d3.scaleBand().padding(0.2);\n    const yScale = d3.scaleLinear().domain([0, maxScale]); //max scale should be dynamic\n    yScale.range([height, 0]);\n    xScale.range([0, width]).domain(data.map((d) => d[property.xprop]));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-bar\");\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2 + margin.x)\n      .attr(\"y\", margin.y / 2)\n      .attr(\"class\", \"title\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(title);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", -(height / 2) - margin.y)\n      .attr(\"y\", margin.x / 2.4)\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"class\", \"title\")\n      .text(ytitle);\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .style('font-size', 20)\n      .call(d3.axisBottom(xScale));\n\n    const path = chart.selectAll().data(data);\n\n    path\n      .enter()\n      .append(\"rect\").on('click', (e, d) => {\n        handleDeliveryBarChartClick(d);\n      })\n      .attr('id', (d) => d?.fascia_anagrafica)\n      .attr('opacity', (d) => {\n        if(selected){\n          return selected === d?.fascia_anagrafica ? 1 : 0.3\n        }else{\n          return 1\n        }\n      })\n      .attr(\"class\", \"bar\")\n      .attr(\"x\", (d) => xScale(d[property.xprop]))\n      .attr(\"y\", (d) => yScale(d[property.yprop]))\n      .attr(\"height\", (d) => height - yScale(d[property.yprop]))\n      .attr(\"width\", xScale.bandwidth())\n      .append(\"title\")\n      .attr(\"x\", (d) => xScale(d[property.xprop]))\n      .attr(\"y\", (d) => yScale(d[property.yprop]))\n      .text((d) => `Fascia ${d[property.xprop]} totale: ${d[property.yprop]}`)\n\n    path\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"bartext\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"fill\", \"white\")\n      .attr(\"x\", (d) => xScale(d[property.xprop]) + 35)\n      .attr(\"y\", (d) =>\n        height - yScale(d[property.yprop]) >= 0\n          ? yScale(d[property.yprop]) - 10\n          : yScale(d[property.yprop])\n      )\n      .text((d) => d[property.yprop].toLocaleString('it'));\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\">\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import { React, useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson-client\";\nimport _ from 'lodash';\n\nimport \"./MapArea.css\"\n\nexport const MapArea = ({\n  handleMapDeliveryClick,\n  fillMapDeliveryArea,\n  fillBy,\n  summary,\n  tooltip\n}) => {\n  const [geographies, setGeographies] = useState([]);\n  const [maxValue, setMaxValue] = useState(0);\n\n  useEffect(()=>{\n    const maxValue = _.maxBy(summary || {}, fillBy)\n    setMaxValue(maxValue ? maxValue[fillBy] : 0)\n  },[summary, fillBy])\n\n  const width = 498,\n    height = 478;\n\n  const projection = d3\n    .geoAlbers()\n    .center([0, 41])\n    .rotate([347, 0])\n    .parallels([35, 45])\n    .scale(2200)\n    .translate([width / 2, height / 2]);\n  useEffect(() => {\n    const fetchData = async () => {\n      const res = await fetch(\"data/geo/it.json\");\n      const data = await res.json();\n      setGeographies(topojson.feature(data, data.objects.regions).features);\n    };\n    fetchData();\n  }, []);\n  \n  return (\n    <div className=\"map-area mt-sx-3\">\n      <svg className=\"h-100 w-100\" height={height} >\n        <g className=\"countries\" >\n          {geographies.map((d, i) => {\n            let reg_name = d.properties.reg_name;\n            let regions = _.filter(summary, i => i.area === reg_name)\n            \n            let region = {};\n            if (regions && regions.length > 0) {\n              region = regions[0];\n            }\n\n            return (\n              <path\n                key={`path-${i}`}\n                d={d3.geoPath().projection(projection)(d)}\n                className=\"country\"\n                id={`${region?.area?.trim()}`}\n                fill={fillMapDeliveryArea({region, maxValue, field: fillBy})}\n                stroke=\"#FFFFFF\"\n                strokeWidth={0.7}\n                onClick={() => handleMapDeliveryClick(region)}\n              >\n                <title>\n                  <span className=\"bg-info\">\n                    {tooltip(region)}\n                  </span>\n                </title>\n              </path>\n            );\n          })}\n          );\n        </g>\n      </svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { find, head, max, isEmpty } from \"lodash\";\nimport { Table } from \"./../components/Table\";\nimport { BarChart } from \"./../components/BarChart\";\nimport { MapArea } from \"./../components/MapArea\";\n\nexport const Deliveries = ({ data }) => {\n  const [deliveryMapData, setDeliveryMapData] = useState([]);\n  const [deliveryTableData, setDeliveryTableData] = useState([]);\n  const [deliverySelectedRegion, setDeliverySelectedRegion] = useState(null);\n  const [totalDelivery, setTotalDelivery] = useState(0);\n  const [totalAgeByGender, setTotalAgeByGender] = useState({});\n  const [deliveryBarChartData, setdeliveryBarChartData] = useState([]);\n  const [selectedAge, setSelectedAge] = useState(null);\n\n  useEffect(() => {\n    if (!isEmpty(data)) {\n      setDeliveryMapData(data.totalDeliverySummary);\n      setdeliveryBarChartData(data.categoriesAndAges);\n      setTotalAgeByGender(data.gender);\n      setDeliveryTableData(data.totalDeliverySummary);\n      setTotalDelivery(data.tot);\n    }\n  }, [data]);\n\n  const resetFilter = () => {\n    setDeliverySelectedRegion(null);\n    setDeliveryTableData(data.totalDeliverySummary);\n    setTotalDelivery(data.tot);\n    setTotalAgeByGender(data.gender);\n    setdeliveryBarChartData(data.categoriesAndAges);\n    setSelectedAge(null);\n    setDeliveryMapData(data.totalDeliverySummary);\n  };\n\n  const fillMapDeliveryArea = ({ region, maxValue, field }) => {\n    let scaleOp = 0;\n    if (region.code === deliverySelectedRegion) {\n      scaleOp = 1;\n    } else if (!deliverySelectedRegion) {\n      scaleOp = max([region[field] / maxValue, 0.1]);\n    } else {\n      const valueToFill = region[field] / (2 * maxValue);\n      scaleOp = max([valueToFill, 0.1]);\n    }\n    return `rgba(0,102,204,${scaleOp}) `;\n  };\n\n  const handleMapDeliveryClick = (region) => {\n    if (selectedAge) {\n      resetFilter();\n    }\n\n    if (deliverySelectedRegion === region.code) {\n      resetFilter();\n    } else {\n      const deliveryTableFilteredData = find(\n        data.totalDeliverySummary,\n        (d) => d.code === region.code\n      );\n\n      setDeliveryTableData([deliveryTableFilteredData]);\n      setdeliveryBarChartData(deliveryTableFilteredData?.byAge || []);\n      setDeliverySelectedRegion(region.code);\n      setTotalDelivery(deliveryTableFilteredData.dosi_somministrate);\n      setTotalAgeByGender({\n        gen_m: deliveryTableFilteredData.sesso_maschile,\n        gen_f: deliveryTableFilteredData.sesso_femminile,\n      });\n    }\n  };\n\n  const handleDeliveryBarChartClick = (bar) => {\n    if (deliverySelectedRegion) {\n      resetFilter();\n    }\n\n    if (bar.fascia_anagrafica === selectedAge) {\n      resetFilter();\n    } else {\n      const details = find(\n        data.categoriesAndAges,\n        (i) => i.fascia_anagrafica === bar.fascia_anagrafica\n      );\n\n      setdeliveryBarChartData(data.categoriesAndAges);\n      setTotalDelivery(details.totale);\n      setSelectedAge(bar.fascia_anagrafica);\n      setDeliveryTableData(\n        head(data.totalDeliverySummaryByAge[bar.fascia_anagrafica]).details\n      );\n      setTotalAgeByGender({\n        gen_m: bar.sesso_maschile,\n        gen_f: bar.sesso_femminile,\n      });\n      setDeliveryMapData(\n        head(data.totalDeliverySummaryByAge[bar.fascia_anagrafica]).details\n      );\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col-12 d-flex justify-content-end\">\n          <img alt=\"reset\" src=\"reset.png\" onClick={resetFilter} />\n        </div>\n      </div>\n\n      <div className=\"row\" style={{ backgroundColor: \"#F8FBFE\" }}>\n        <div className=\"col-12 col-lg-5 h-100 order-md-2 order-lg-1 \">\n          <div className=\"container-info d-none d-sm-none d-md-flex d-lg-flex\">\n            <span\n              data-toggle=\"tooltip\"\n              title=\"% somministrazioni su dosi consegnate\"\n              className=\"circle-info\"\n            >\n              i\n            </span>\n          </div>\n          <Table deliveryTableData={deliveryTableData} className=\"mr-5 h-100\" />\n        </div>\n\n        <div className=\"col-12 col-lg-7 order-md-1 order-lg-2\">\n          <div className=\"p-4 position-relative d-lg-none\">\n            <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n              <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n\n              <h5 className=\"pl-3 pl-sm-1\">\n                Distribuzione somministrazioni\n                <br /> rispetto alle consegne\n              </h5>\n            </div>\n          </div>\n\n          <div className=\"p-5 d-none d-lg-block\">\n            <div\n              className=\"d-flex justify-content-end\"\n              style={{\n                position: \"absolute \",\n                top: 150,\n                right: 50,\n              }}\n            >\n              <img\n                src=\"logo.png\"\n                width=\"35\"\n                height=\"35\"\n                alt=\"Logo\"\n                style={{\n                  position: \"absolute\",\n                  top: -10,\n                }}\n              />\n\n              <h5 className=\"pl-3 pl-sm-1 text-right\">\n                <span\n                  data-toggle=\"tooltip\"\n                  title=\"Nel grafico  rappresentato il tasso di somministrazione, \n      ovvero il rapporto tra le somministrazioni e le dosi consegnate (%)\"\n                  className=\"circle-info\"\n                  style={{\n                    position: \"relative\",\n                    right: 23,\n                    top: 25,\n                  }}\n                >\n                  i\n                </span>\n                Distribuzione somministrazioni\n                <br /> rispetto alle consegne\n              </h5>\n            </div>\n          </div>\n          <MapArea\n            fillMapDeliveryArea={fillMapDeliveryArea}\n            summary={deliveryMapData}\n            handleMapDeliveryClick={handleMapDeliveryClick}\n            tooltip={(r) =>\n              r.area +\n              \" \" +\n              (r.percentuale_somministrazione &&\n                r.percentuale_somministrazione.toLocaleString(\"it\")) +\n              \"%\"\n            }\n            fillBy=\"percentuale_somministrazione\"\n            className=\"ml-5 w-100 h-100\"\n          />\n          <div className=\"p-4 position-relative\">\n            <div className=\"text-black w-100\">\n              <div className=\"w-100 h-100 d-flex justify-content-start \">\n                <img\n                  src=\"logo.png\"\n                  width=\"45\"\n                  height=\"45\"\n                  alt=\"Logo\"\n                  className=\"mt-3\"\n                />\n                <span className=\"font-50 pl-3\">\n                  {totalDelivery?.toLocaleString(\"it\")}\n                </span>\n              </div>\n\n              <div className=\"w-100  h-100 d-flex justify-content-start\">\n                <h5>Totale somministrazioni</h5>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        className=\"row position-powerbi\"\n        style={{ backgroundColor: \"#F8FBFE\" }}\n      >\n        <div className=\"col-12 col-md-6 align-items-end testo-info-campania d-none d-sm-none d-md-flex d-lg-flex\"></div>\n        <div className=\"col-12 col-md-6  position-relative\">\n          <div className=\"bg-gradient-bar\"></div>\n          <div className=\"row\">\n            <div className=\"col-6 d-flex align-items-baseline\">\n              <img src=\"user_f.png\" alt=\"users\" width=\"75px\" />\n              <span className=\"text-center font-weight-light text-white\">\n                <h3 className=\"total_gender\">\n                  {totalAgeByGender?.gen_f?.toLocaleString(\"it\")}\n                </h3>\n              </span>\n            </div>\n            <div className=\"col-6  d-flex align-items-baseline\">\n              <img src=\"user_m.png\" alt=\"users\" width=\"75px\" />\n              <span className=\"text-center font-weight-light text-white\">\n                <h3 className=\"total_gender\">\n                  {totalAgeByGender?.gen_m?.toLocaleString(\"it\")}\n                </h3>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-12 col-md-5\" style={{ backgroundColor: \"#17324D\" }}>\n          <div className=\"p-4 position-relative\">\n            <div style={{ height: 100 }}>\n              <img src=\"group_person.svg\" alt=\"Logo\" className=\"img-fluid\" />\n            </div>\n            <div className=\"text-white w-100\">\n              <div className=\"w-100 h-100 d-flex justify-content-end\">\n                <img src=\"logo.png\" width=\"40\" height=\"40\" alt=\"Logo\" />\n              </div>\n              <div className=\"w-100  h-100 d-flex justify-content-end text-right\">\n                <h3>\n                  Somministrazioni<br></br> per fasce di et\n                </h3>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          className=\"col-12  col-md-7\"\n          style={{\n            backgroundColor: \"#17324D\",\n          }}\n        >\n          <BarChart\n            title=\"\"\n            xtitle=\"Fascia d'et\"\n            ytitle=\"\"\n            width={800}\n            handleDeliveryBarChartClick={handleDeliveryBarChartClick}\n            height={300}\n            selected={selectedAge}\n            property={{ xprop: \"fascia_anagrafica\", yprop: \"totale\" }}\n            data={deliveryBarChartData}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../App.css\";\nimport { maxX } from \"../utils\";\n\nexport const HBarChart = (\n  {\n    handleRectClick, \n    height,\n    width,\n    data,\n    selectedCodeCategory,\n    property,\n    title,\n    ytitle\n  }\n  ) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n    doExit();\n    draw();\n    // eslint-disable-next-line \n  },[data, selectedCodeCategory]);\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n    const maxScale = data?.reduce(maxX(property.yprop), 0) || 0;\n\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 50, x: 170 };\n\n    // Add X axis\n    const xScale = d3.scaleLinear().domain([0, maxScale]).range([0, width-20]);\n    // Y axis\n    const yScale = d3\n      .scaleBand()\n      .padding(0.4)\n      .range([0, height])\n      .domain(data.map((d) => d[property.xprop]))\n      \n      \n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-horizontal-bar\")\n    \n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2 + margin.x)\n      .attr(\"y\", margin.y / 2)\n      .attr(\"class\", \"hb-title\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(title);\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n      \n\n    chart.append(\"g\")\n      .attr(\"class\", \"hb-axis\")\n      .call(d3.axisLeft(yScale))\n      .style(\"font-size\", \"18px\")\n      .attr(\"transform\", `translate(85,0)`)\n    \n\n    const path = chart.selectAll().data(data);\n\n    path\n      .enter()\n      .append(\"rect\").on('click', (e, d) => {\n        handleRectClick(d);\n      })\n      .attr('opacity', (d) => {\n        let opac = selectedCodeCategory === d.code ? 1 : !selectedCodeCategory ? 1 : 0.3;\n        return opac;\n      })\n      .attr(\"class\", \"hb-bar\")\n      .attr(\"x\", xScale(0)+95)\n      .attr(\"y\", (d) => yScale(d[property.xprop]))\n      .attr(\"width\", (d) => xScale(d[property.yprop]))\n      .attr(\"height\", yScale.bandwidth())\n      .append(\"hb-title\")\n      .attr(\"x\", (d) => xScale(d[property.xprop]))\n      .attr(\"y\", (d) => yScale(d[property.yprop]))\n      .text(\n        (d) =>\n          `Fascia ${d[property.xprop]} totale: ${d[property.yprop]}`\n      )\n\n    path\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"hb-bartext\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"fill\", \"white\")\n      .attr(\"x\", (d) => xScale(d[property.yprop]) + 140)\n      .attr(\"y\", (d) =>\n        height - yScale(d[property.xprop]) >= 0\n          ? yScale(d[property.xprop]) + 20\n          : yScale(d[property.xprop])\n      )\n      .text((d) => d[property.yprop].toLocaleString('it'));\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\" style={{marginTop: 40}}>\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { find, max, isEmpty } from \"lodash\";\nimport { HBarChart } from \"./../components/HBarChart\";\nimport { MapArea } from \"./../components/MapArea\";\n\nexport const Categories = ({ data }) => {\n  const [categoryData, setCategoryData] = useState([]);\n  const [categoryMapData, setCategoryMapData] = useState([]);\n  const [selectedCodeCategory, setSelectedCodeCategory] = useState(null);\n  const [totalByCategory, setTotalByCategory] = useState(0);\n  const [categoryMapField, setCategoryMapField] = useState(\n    \"dosi_somministrate\"\n  );\n  const [categorySelectedRegion, setCategorySelectedRegion] = useState(null);\n\n  useEffect(() => {\n    if (!isEmpty(data)) {\n      setCategoryData(data.categories);\n      setTotalByCategory(data.tot);\n      setCategoryMapData(data?.totalDeliverySummary);\n    }\n  }, [data]);\n\n  const resetFilter = () => {\n    setCategorySelectedRegion(null);\n    setCategoryData(data?.categories);\n    setTotalByCategory(data?.tot);\n    setCategoryMapData(data?.totalDeliverySummary);\n    setSelectedCodeCategory(null);\n    setCategoryMapField(\"dosi_somministrate\");\n  };\n\n  const handleMapCategoryClick = (region) => {\n    /* if (selectedCodeCategory) {\n      resetFilter();\n    }\n\n    if (categorySelectedRegion === region.code) {\n      resetFilter();\n    } else {\n      setCategorySelectedRegion(region.code);\n      setCategoryData(data.categoriesByRegions[region.code]);\n      setTotalByCategory(region.dosi_somministrate);\n    } */\n  };\n\n  const fillMapCategoryArea = ({ region, maxValue, field }) => {\n    let scaleOp = 0;\n    if (region.code === categorySelectedRegion) {\n      scaleOp = 1;\n    } else if (!categorySelectedRegion) {\n      scaleOp = max([region[field] / maxValue, 0.1]);\n    } else {\n      const valueToFill = region[field] / (2 * maxValue);\n      scaleOp = max([valueToFill, 0.1]);\n    }\n    return `rgba(0,102,204,${scaleOp}) `;\n  };\n\n  const handleCategoryBarChartClick = (cat) => {\n    if (categorySelectedRegion) {\n      resetFilter();\n    }\n\n    if (selectedCodeCategory === cat?.code) {\n      resetFilter();\n    } else if (cat) {\n      const details = find(data.categories, (i) => i.code === cat.code);\n      setSelectedCodeCategory(cat.code);\n      setCategoryMapField(cat.code);\n      setTotalByCategory(details?.total);\n    }\n  };\n\n  return (\n    <div className=\"row \">\n      <div\n        style={{ marginTop: 40 }}\n        className=\"col-12  d-flex justify-content-center align-items-center p-5 bg-title-plot\"\n      >\n        <img\n          src=\"logo.png\"\n          width=\"86\"\n          height=\"86\"\n          alt=\"Logo\"\n          className=\"img-fluid\"\n          style={{ zIndex: 10 }}\n        />\n        <h3 className=\"text-center\">Somministrazioni per categoria</h3>\n      </div>\n      <div className=\"col-12 col-md-12 h-100  \">\n        <div\n          className=\"mb-5  d-lg-none \"\n          style={{\n            position: \"relative\",\n            background: \"#013366\",\n          }}\n        >\n          <div className=\"text-white w-100\">\n            <div className=\"w-100  h-100 d-flex justify-content-start pt-5 pl-4\">\n              <h5>\n                Totale<br></br>somministrazioni\n              </h5>\n            </div>\n            <div className=\"w-100  h-100 d-flex justify-content-start pl-4\">\n              <p className=\"numeri_box\">\n                {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n              </p>\n            </div>\n            <div className=\"col-12 d-flex justify-content-end  pb-2\">\n              <img\n                alt=\"reset-plot2\"\n                src=\"reset_white.png\"\n                onClick={resetFilter}\n                height={35}\n              />\n            </div>\n          </div>\n        </div>\n        <div\n          className=\"col-3 col-md-3  d-none d-lg-block\"\n          style={{ height: 100 }}\n        >\n          <div\n            style={{\n              position: \"relative\",\n              background: \"#17324D\",\n              top: -90,\n              left: 105,\n            }}\n          >\n            <div className=\"text-white w-100\">\n              <div className=\"w-100  h-100 d-flex justify-content-start pt-3 pl-4\">\n                <h5>\n                  Totale<br></br>somministrazioni\n                </h5>\n              </div>\n              <div className=\"w-100  h-100 d-flex justify-content-start pl-4\">\n                <p className=\"numeri_box\">\n                  {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n                </p>\n              </div>\n              <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                <img\n                  alt=\"Reset\"\n                  src=\"reset_white.png\"\n                  onClick={resetFilter}\n                  height={35}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"col-12 col-md-6 h-100\">\n        <HBarChart\n          title=\"\"\n          xtitle=\"Vaccinazioni per categoria\"\n          handleRectClick={handleCategoryBarChartClick}\n          ytitle=\"\"\n          width={+220}\n          height={+260}\n          property={{ xprop: \"name\", yprop: \"total\" }}\n          data={categoryData}\n          selectedCodeCategory={selectedCodeCategory}\n        />\n      </div>\n      <div className=\"col-12 col-md-6 h-100\" style={{ overflow: \"hidden\" }}>\n        <div className=\"p-4 position-relative d-lg-none\">\n          <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n            <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n            <h5 className=\"pl-3 pl-sm-1\">\n              Vaccinazioni\n              <br /> per regione\n            </h5>\n          </div>\n        </div>\n        <div\n          className=\"p-4 position-relative d-none d-lg-block\"\n          style={{ left: \"300px\", top: \"190px\" }}\n        >\n          <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n            <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n            <h5 className=\"pl-3 pl-sm-1\">\n              Somministrazioni\n              <br /> per regione\n            </h5>\n          </div>\n        </div>\n        <MapArea\n          fillMapDeliveryArea={fillMapCategoryArea}\n          summary={categoryMapData}\n          handleMapDeliveryClick={handleMapCategoryClick}\n          fillBy={categoryMapField}\n          tooltip={(r) =>\n            r.area +\n            \" \" +\n            (r[categoryMapField] && r[categoryMapField].toLocaleString(\"it\"))\n          }\n          className=\"ml-5 w-100 h-100\"\n        />\n      </div>\n    </div>\n  );\n};\n","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../App.css\";\nimport { maxX } from \"../utils\";\n\nexport const BarChartSupplier = (props) => {\n\n  const width = +props.width, //hack to get int\n    height = +props.height;\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n    doExit();\n    draw();\n    // eslint-disable-next-line \n  }, [props]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n    const data = props?.data || [];\n    const maxScale = data?.reduce(maxX(props.property.yprop), 0) || 0;\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 50, x: 20 };\n\n    // axis\n    const xScale = d3.scaleBand().padding(0.5);\n    const yScale = d3.scaleLinear().domain([0, maxScale]); //max scale should be dynamic\n    yScale.range([height, 0]);\n    xScale.range([0, width]).domain(data.map((d) => d[props.property.xprop]));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-bar\");\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 8 + margin.x)\n      .attr(\"y\", margin.y / 6)\n      .attr(\"class\", \"title-bar-dark\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(props.title);\n\n    // svg\n    //   .append(\"text\")\n    //   .attr(\"x\", width / 2 + margin.x)\n    //   .attr(\"y\", margin.y * 2)\n    //   .attr(\"transform\", `translate(0,${height - margin.y / 4})`)\n    //   .attr(\"class\", \"title-bar\")\n    //   .text(props.xtitle);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", -(height / 2) - margin.y)\n      .attr(\"y\", margin.x / 2.4)\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"class\", \"title-bar-dark\")\n      .text(props.ytitle);\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    // chart.append(\"g\").attr(\"class\", \"axis\").call(d3.axisLeft(yScale));\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis-dark\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .style('font-size', 20)\n      .call(d3.axisBottom(xScale));\n\n    // chart\n    //   .append(\"g\")\n    //   .attr(\"class\", \"grid-hline\")\n    //   .call(d3.axisLeft().scale(yScale).tickSize(-width, 0, 0).tickFormat(\"\"));\n\n    const path = chart.selectAll().data(data);\n\n    path\n      .enter()\n      .append(\"rect\").on('click', (e, d) => {\n        props.handleDeliveryBarChartClick(d);\n      })\n      .attr('id', (d) => d?.fornitore)\n      .attr('opacity', (d) => {\n        let opac = props.selected?.fornitore === d?.fornitore ? 1 : !props.selected ? 1 : 0.3;\n        return opac;\n      })\n      .attr(\"class\", \"bg-bar\")\n      .attr(\"x\", (d) => +xScale(d[props.property.xprop]))\n      .attr(\"y\", (d) => yScale(d[props.property.yprop]))\n      .attr(\"height\", (d) => height - yScale(d[props.property.yprop]))\n      .attr(\"width\", xScale.bandwidth())\n      .append(\"title\")\n      .attr(\"x\", (d) => xScale(d[props.property.xprop]))\n      .attr(\"y\", (d) => yScale(d[props.property.yprop]))\n      .text((d) => `Fascia ${d[props.property.xprop]} totale: ${d[props.property.yprop]}`)\n\n    path\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"bartext-dark\")\n      .attr(\"text-anchor\", \"center\")\n\n      .attr(\"fill\", \"black\")\n      .attr(\"x\", (d) => xScale(d[props.property.xprop]))\n      .attr(\"y\", (d) =>\n        height - yScale(d[props.property.yprop]) >= 0\n          ? yScale(d[props.property.yprop]) - 10\n          : yScale(d[props.property.yprop])\n      )\n      .text((d) => d[props.property.yprop]?.toLocaleString('it'));\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef}>\n      {/* <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n        <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n        <h5 className=\"pl-3 pl-sm-1\">Distribuzione vaccini per fornitore</h5>\n      </div> */}\n      <svg ref={myRef}></svg>\n    </div>\n  );\n};\n","import { React, useEffect, useState } from \"react\";\nimport \"../App.css\";\nimport { isEmpty } from \"lodash\";\nimport { simulateClick } from './../utils';\n\nimport { BarChartSupplier } from \"./BarChartsSupplier\";\n// import { MapAreaBySupplier } from \"./MapAreaBySupplier\";\nexport const Supplier = (data) => {\n    // const [barState, setBarState] = useState(null);\n    const [selectedLocationCategoryMap, setSelectedLocationCategoryMap] = useState(null);\n    const [selectedSupplier, setelectedSupplier] = useState(null);\n    // const [maxByCategory, setMaxByCategory] = useState(0);\n    // const [summary, setSummary] = useState({});\n    const [deliveryBarChartData, setdeliveryBarChartData] = useState([]);\n    const [totalSuplier, setTotalSuplier] = useState(0);\n\n    const resetFilter = () => {\n        // setSummary(data);\n        // setMaxByCategory(data?.data?.totalSuplier)\n        setdeliveryBarChartData(data?.data?.allDosesSupplier);\n        setTotalSuplier(data?.data?.totalSuplier);\n        setelectedSupplier(null);\n        setSelectedLocationCategoryMap(null);\n        // setBarState(null);\n        setTotalSuplier(data?.data?.totalSuplier);\n\n    }\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            // setSummary(data);\n            // setMaxByCategory(data?.data?.totalSuplier)\n            setdeliveryBarChartData(data?.data?.allDosesSupplier);\n            setTotalSuplier(data?.data?.totalSuplier);\n        }\n    }, [data]);\n\n    // const loadBar = (countryIndex) => {\n    //     let barData = data?.data?.allDosesSupplier;\n    //     let ar = barData.map((e) => {\n    //         let group = e.allDoses.filter((el) => areaMapping[el.area] === countryIndex.area || el.area === countryIndex?.code);\n    //         let totalNumberDosesByRegion = sum(group.map(eGroup => eGroup.numero_dosi));\n    //         return { fornitore: e.fornitore, totale: totalNumberDosesByRegion }\n    //     })\n    //     let total = sum(ar.map(e => e?.totale))\n    //     setTotalSuplier(total);\n    //     // setMaxByCategory(total);\n    //     setdeliveryBarChartData(ar);\n    //     setSelectedLocationCategoryMap(countryIndex);\n    // };\n    // const handleCountryClickCategories = (countryIndex) => {\n    //     if (countryIndex === selectedLocationCategoryMap) {\n    //         resetFilter();\n    //     } else if (selectedSupplier) {\n    //         setelectedSupplier(null);\n    //         loadBar(countryIndex);\n    //     } else {\n    //         loadBar(countryIndex);\n    //     }\n    // };\n    const handleDeliveryBarChartClick = (bar) => {\n        if (selectedSupplier === bar) {\n            resetFilter();\n        } else if (selectedLocationCategoryMap) {\n            resetFilter();\n            simulateClick(bar.fornitore);\n        } else {\n            handleRectClick(bar);\n            setelectedSupplier(bar);\n            setTotalSuplier(bar?.totale);\n            // setMaxByCategory(bar?.totale)\n        }\n    }\n\n    const handleRectClick = (currentRect) => {\n        // let doseBySuppier = groupBy(summary?.data?.allDosesSupplier?.filter(el => el?.fornitore === currentRect?.fornitore)[0]?.allDoses, 'area');\n        // let doses = Object.keys(areaMapping).map(k => {\n        //     let totalDoses;\n        //     let area = areaMapping[k];\n        //     totalDoses = doseBySuppier[k] ? sum(doseBySuppier[k].map((d => d.numero_dosi))) : 0;\n        //     return { area: area, dosi_consegnate: totalDoses }\n        // })\n        // setBarState(doses);\n        setelectedSupplier(currentRect)\n    }\n\n    return (\n        <div className=\"row\">\n            <div className=\"col-12 col-md-12 h-100\">\n                <div className=\"col-12 d-flex justify-content-center align-items-center p-5 bg-title-plot\">\n                    <h3 className=\"text-center\">Distribuzione vaccini per fornitore</h3>\n                    <img src=\"logo.png\" width=\"86\" height=\"86\" alt=\"Logo\" className=\"d-none d-lg-block\"\n                        style={{\n                            position: \"absolute\",\n                            right: 28,\n                            zIndex: 10\n                        }} />\n                </div>\n                {/* BOX BLU */}\n                <div className=\"col-12 col-md-12 h-100\">\n                    {/* LAYOUT MOBILE */}\n                    <div className=\"mb-5 d-lg-none\" style={{\n                        position: 'relative',\n                        background: '#013366',\n                    }}>\n                        <div className=\"text-white w-100\">\n                            <div className=\"w-100  h-100 d-flex justify-content-start pt-5 pl-4\">\n                                <h5>Totale vaccini distribuiti</h5>\n                            </div>\n                            <div className=\"w-100  h-100 d-flex justify-content-start pl-4\">\n                                <p className=\"numeri_box\">{totalSuplier?.toLocaleString('it')}             </p>\n                            </div>\n                            <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                                <img alt=\"reset-plot2\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                            </div>\n                        </div>\n                    </div>\n                    {/* LAYOUT DESKTOP */}\n                    <div className=\"offset-md-9 col-md-3  d-none d-lg-block\" style={{ height: 100 }}>\n                        <div style={{\n                            position: 'relative',\n                            background: '#17324D',\n                            top: -90,\n                            left: -50,\n                        }}>\n                            <div className=\"text-white w-100\">\n                                <div className=\"w-100 h-100 d-flex justify-content-start pt-3 pl-4\">\n                                    <h5>Totale<br></br>vaccini distribuiti</h5>\n                                </div>\n                                <div className=\"w-100  h-100 d-flex justify-content-start pl-4\">\n                                    <p className=\"numeri_box\" >{totalSuplier?.toLocaleString('it')}\n                                    </p>\n                                </div>\n                                <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                                    <img alt=\"Reset\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {/* <div className=\"col-12 col-md-6 h-100\">\n\n                <div className=\"p-4  d-lg-none\">\n                    <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n                        <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n                        <h5 className=\"pl-3 pl-sm-1\">Distribuzione vaccini<br /> per regione</h5>\n                    </div>\n                </div>\n                <div className=\"p-4  d-none d-lg-block position-text-lg\">\n                    <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n                        <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n                        <h5 className=\"pl-3 pl-sm-1\">Distribuzione<br />vaccini<br /> per regione</h5>\n                    </div>\n                </div>\n                <MapAreaBySupplier\n                    summary={barState ? { deliverySummary: barState } : summary.data}\n                    selected={selectedLocationCategoryMap}\n                    handleCountryClick={handleCountryClickCategories}\n                    maxByCategory={maxByCategory}\n                    className=\"w-100 h-100\"\n                />\n            </div> */}\n            <div className=\"col-12 col-md-6 h-100 pb-5\">\n                <BarChartSupplier\n                    title=\"\"\n                    xtitle=\"Fascia d'et\"\n                    ytitle=\"\"\n                    width=\"800\"\n                    handleDeliveryBarChartClick={handleDeliveryBarChartClick}\n                    height=\"300\"\n                    selected={selectedSupplier}\n                    property={{ xprop: \"fornitore\", yprop: \"totale\" }}\n                    data={deliveryBarChartData}\n                />\n            </div>\n            <div className=\" d-none d-sm-none d-md-block d-lg-none  col-md-6\">\n\n            </div>\n        </div>\n    );\n};","import { React, useEffect } from \"react\";\nimport $ from \"jquery\";\nimport DataTable from \"datatables.net\";\nimport \"datatables.net-bs4/css/dataTables.bootstrap4.min.css\";\n\n$.DataTable = DataTable;\nconst columns = [\n  { title: \"Regione\", data: \"area\" },\n  { title: \"Punto di somministrazione\", data: \"denominazione_struttura\" },\n  { title: \"Tipologia\", data: \"tipologia\" }\n];\n\nexport const LocationsTable = (props) => {\n\n  useEffect(() => {\n    const {setLocationCount} = props;\n\n    const table = $(\"#datatable-locations\")\n      .find(\"table\")\n      .DataTable({\n        dom:\n          \"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'>>\" +\n          \"<'row'<'col-sm-12'tr>>\" +\n          \"<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>\",       \n        paging: false,\n        columnDefs: [{\n          \"targets\": [1,2], \"searchable\": false\n        }],\n        searching: true,\n        destroy: true,\n        bLengthChange: false,\n        info: false,\n        scrollY: '550px',\n        scrollCollapse: true,\n        data: props.summary?.locations || [],\n        columns,\n      });\n    if (props?.selected) {\n      table.search(props.selected).draw();\n    } else {\n      table.search(\" \").draw();\n    }\n\n    setLocationCount(table.rows( {search:'applied'} ).count()/2)\n  });\n  return (\n    <div id=\"datatable-locations\">\n      <table\n        className=\"display compact\"\n        cellSpacing=\"0\"\n        width=\"100%\"\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty, max } from \"lodash\";\nimport { MapArea } from \"./../components/MapArea\";\nimport { LocationsTable } from \"./../components/LocationsTable\";\n\nconst TextBoxTotal = ({locationCount}) => (\n  <div className=\"text-white w-100\">\n    <div className=\"w-100  h-100 d-flex justify-content-start pt-5 pl-4\">\n      <h3>Totale: {locationCount}</h3>\n    </div>\n  </div>\n)\n\nconst TextBoxMap = () => (\n  <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n    <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n    <h5 className=\"pl-3 pl-sm-1\">\n      Principali punti di\n      <br /> somministrazione <br /> per regione\n    </h5>\n  </div>\n)\n\nexport const Locations = ({ data }) => {\n  const [summary, setSummary] = useState({});\n  const [selectedLocation, setSelectedLocation] = useState(\"\");\n  const [locationCount, setLocationCount] = useState(0);\n\n  useEffect(() => {\n    if (!isEmpty(data)) {\n      setSummary(data);\n    }\n  }, [data]);\n\n  const resetFilter = () => {\n    setSelectedLocation(\"\");\n    setLocationCount(0);\n  };\n\n  const fillMapDeliveryArea = ({ region, maxValue, field }) => {\n    let scaleOp = 0;\n    if (region.area === selectedLocation) {\n      scaleOp = 1;\n    } else if (!selectedLocation) {\n      scaleOp = max([region[field] / maxValue, 0.1]);\n    } else {\n      const valueToFill = region[field] / (2 * maxValue);\n      scaleOp = max([valueToFill, 0.1]);\n    }\n    return `rgba(23,50,77,${scaleOp})`;\n  };\n\n  const handleClick = (region) => {\n    if (selectedLocation === region.area) {\n      setSelectedLocation(null);\n    } else {\n      setSelectedLocation(region.area);\n    }\n  };\n\n  return (\n    <div className=\"row \">\n      <div className=\"col-12 d-flex justify-content-center align-items-center p-5 bg-title-plot\">\n        <img\n          src=\"logo.png\"\n          width=\"86\"\n          height=\"86\"\n          alt=\"Logo\"\n          className=\"img-fluid\"\n          style={{ zIndex: 10 }}\n        />\n        <div style={{ paddingTop: 50 }}>\n          <h3  className=\"text-center\">Principali punti di somministrazione</h3>\n          <div className=\"text-center position-relative\">(Sono inclusi i punti di somministrazione ospedalieri e territoriali;<br/> non sono inclusi i punti di somministrazione temporanei)</div>\n        </div>\n      </div>\n      <div className=\"col-12 col-md-12 h-100 p-0\" style={{marginTop: 20}}>\n        <div\n          className=\"mb-5  d-lg-none \"\n          style={{\n            position: \"relative\",\n            background: \"#013366\",\n          }}\n        >\n          <div className=\"text-white w-100\">\n            <TextBoxTotal locationCount={locationCount}/>\n            <div className=\"col-12 d-flex justify-content-end  pb-2\">\n              <img\n                alt=\"reset-plot\"\n                src=\"reset_white.png\"\n                onClick={resetFilter}\n                height={35}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"col-3 col-md-3 h-100 d-none d-lg-block\">\n          <div\n            style={{\n              position: \"relative\",\n              // width: 300,\n              // height: 180,\n              background: \"#17324D\",\n              top: -90,\n              left: 40,\n            }}\n          >\n            <div className=\"text-white w-100\">\n              <TextBoxTotal locationCount={locationCount}/>\n              <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                <img\n                  alt=\"reset-white\"\n                  src=\"reset_white.png\"\n                  onClick={resetFilter}\n                  height={35}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"col-12 col-md-6 pt-5\">\n        <div className=\"p-4 position-relative d-lg-none\" style={{left: 150, top: -115}}>\n          <TextBoxMap/>\n        </div>\n        <div\n          className=\"p-4 position-relative d-none d-lg-block\"\n          style={{ left: \"300px\", top: \"-60px\" }}\n        >\n          <TextBoxMap/>\n        </div>\n        <div style={{marginTop: -200}}>\n        <MapArea\n          fillMapDeliveryArea={fillMapDeliveryArea}\n          summary={data.locationsByRegion}\n          handleMapDeliveryClick={handleClick}\n          tooltip={(r) =>\n            r.area + \": \" + (r.locations && r.locations.toLocaleString(\"it\"))\n          }\n          fillBy=\"locations\"\n          className=\"ml-5 w-100 h-100\"\n        />\n        </div>\n      </div>\n      <div className=\"col-12 col-md-6 pt-3 pl-3\" style={{marginTop: -20}}>\n        <LocationsTable\n          summary={{ ...summary }}\n          selected={selectedLocation}\n          className=\"mr-5 h-100\"\n          setLocationCount={setLocationCount}\n        />\n      </div>\n    </div>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { HeaderBar } from \"./components/HeaderBar\";\nimport { FooterBar } from \"./components/FooterBar\";\n\nimport { Total } from \"./components/Total\";\nimport { loadData } from \"./loadData\";\nimport { Deliveries } from \"./containers/deliveries\";\nimport { Categories } from \"./containers/categories\";\nimport { Supplier } from './components/Supplier';\nimport { hideLoader } from \"./utils\";\nimport \"./App.css\";\nimport { Locations } from \"./containers/locations\";\n\n\nfunction App() {\n  const [summary, setSummary] = useState({});\n\n  useEffect(() => {\n    loadData().then((d) => {\n      hideLoader();\n      setSummary(d);\n    });\n  }, []);\n\n\n  return (\n    <div>\n      <HeaderBar />\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-12 d-flex justify-content-center\">\n\n            <Total className=\"mb-3\" summary={{ ...summary }} />\n\n          </div>\n        </div>\n        <div style={{ padding: 20 }}></div>\n\n        <div className=\"row position-powerbi\" style={{ backgroundColor: '#17324D' }} >\n          <div className=\"col-12\">\n            <div className=\"p-4 position-relative d-flex justify-content-center  h-100\" style={{ backgroundColor: '#17324D', minHeight: 240 }}>\n              <div className=\"d-none  d-lg-block\" style={{ height: 100, position: 'absolute', left: '20px', top: '20px' }}>\n                <img src=\"group_person.svg\" alt=\"Logo\" className=\"img-fluid\" />\n              </div>\n              <div className=\"  d-none  d-lg-block position-absolute center-logo\">\n                <img src=\"logo.png\" width=\"80\" height=\"80\" alt=\"Logo\" />\n              </div>\n              <div className=\"text-white w-100\" style={{ padding: 20 }}>\n\n                <div className=\"w-100  h-100 align-items-center d-flex justify-content-center text-right\">\n                  <h4 style={{ marginRight: 10 }}>Totale<br></br> persone vaccinate</h4>\n                  <div className=\"d-flex justify-content-center text-right align-items-center border-pink\"> {summary?.totalDoses?.seconda_dose?.toLocaleString('it')}</div>\n                </div>\n                <div className=\"text-center position-relative\" style={{ top: -10 }}>(a cui sono state somministrate la prima e la seconda dose di vaccino)</div>\n              </div>\n\n            </div>\n          </div>\n        </div>\n\n        <Deliveries\n          data={summary}\n        />\n        <Categories\n          data={summary}\n        />\n        <Supplier data={summary}></Supplier>\n        <Locations\n          data={summary}\n        />\n        <div className=\"row\">\n          <div className=\"col-12 text-center pt-5 pb-3\">\n            I dati visualizzati sono disponibili all'indirizzo{\" \"}\n            <a href=\"https://github.com/italia/covid19-opendata-vaccini\">\n              https://github.com/italia/covid19-opendata-vaccini\n        </a>\n          </div>\n        </div>\n      </div>\n      <FooterBar />\n\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}